<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SRIM Calculator</title>
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" src="favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

    <!-- Raleway 폰트 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Raleway&display=swap" rel="stylesheet">
    <!------------------>

    <!-- meta -->
    <meta property="og:url" content="https://www.srim.store/">
    <meta property="og:title" content="SRIM Calculator">
    <meta property="og:type" content="website">
    <meta property="og:image" content="thumbnail.png">
    <!-- <meta property="og:description" content="Furniture & Product Design"> -->


    <!-- AJAX로 img_stock_graph scr 보내기 -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
      $(document).ready(function() {
        // candle_day
        $("#candle_day").on("click", function() {
          // Make an AJAX POST request to the server
          $.ajax({
            url: "/sendData_candle_day", // Endpoint on the server
            type: "POST",
            dataType: "JSON"
          })
          .done(function(data) {
            // Display the received data on the web page
            $("#img_stock_graph").attr('src', data.changeSrc);
          })
          .fail(function(xhr, status, errorThrown) {
            alert("Ajax failed");
          });
        });


        // candle_week
        $("#candle_week").on("click", function() {
          // Make an AJAX POST request to the server
          $.ajax({
            url: "/sendData_candle_week", // Endpoint on the server
            type: "POST",
            dataType: "JSON"
          })
          .done(function(data) {
            // Display the received data on the web page
            $("#img_stock_graph").attr('src', data.changeSrc);
          })
          .fail(function(xhr, status, errorThrown) {
            alert("Ajax failed");
          });
        });


        // candle_month
        $("#candle_month").on("click", function() {
          // Make an AJAX POST request to the server
          $.ajax({
            url: "/sendData_candle_month", // Endpoint on the server
            type: "POST",
            dataType: "JSON"
          })
          .done(function(data) {
            // Display the received data on the web page
            $("#img_stock_graph").attr('src', data.changeSrc);
          })
          .fail(function(xhr, status, errorThrown) {
            alert("Ajax failed");
          });
        });


        // line_day
        $("#line_day").on("click", function() {
          // Make an AJAX POST request to the server
          $.ajax({
            url: "/sendData_line_day", // Endpoint on the server
            type: "POST",
            dataType: "JSON"
          })
          .done(function(data) {
            // Display the received data on the web page
            $("#img_stock_graph").attr('src', data.changeSrc);
          })
          .fail(function(xhr, status, errorThrown) {
            alert("Ajax failed");
          });
        });


        // line_month3
        $("#line_month3").on("click", function() {
          // Make an AJAX POST request to the server
          $.ajax({
            url: "/sendData_line_month3", // Endpoint on the server
            type: "POST",
            dataType: "JSON"
          })
          .done(function(data) {
            // Display the received data on the web page
            $("#img_stock_graph").attr('src', data.changeSrc);
          })
          .fail(function(xhr, status, errorThrown) {
            alert("Ajax failed");
          });
        });


        // line_year1
        $("#line_year1").on("click", function() {
          // Make an AJAX POST request to the server
          $.ajax({
            url: "/sendData_line_year1", // Endpoint on the server
            type: "POST",
            dataType: "JSON"
          })
          .done(function(data) {
            // Display the received data on the web page
            $("#img_stock_graph").attr('src', data.changeSrc);
          })
          .fail(function(xhr, status, errorThrown) {
            alert("Ajax failed");
          });
        });


        // line_year3
        $("#line_year3").on("click", function() {
          // Make an AJAX POST request to the server
          $.ajax({
            url: "/sendData_line_year3", // Endpoint on the server
            type: "POST",
            dataType: "JSON"
          })
          .done(function(data) {
            // Display the received data on the web page
            $("#img_stock_graph").attr('src', data.changeSrc);
          })
          .fail(function(xhr, status, errorThrown) {
            alert("Ajax failed");
          });
        });


        // line_year10
        $("#line_year10").on("click", function() {
          // Make an AJAX POST request to the server
          $.ajax({
            url: "/sendData_line_year10", // Endpoint on the server
            type: "POST",
            dataType: "JSON"
          })
          .done(function(data) {
            // Display the received data on the web page
            $("#img_stock_graph").attr('src', data.changeSrc);
          })
          .fail(function(xhr, status, errorThrown) {
            alert("Ajax failed");
          });
        });
      });
    </script>


</head>
<body style="overflow: scroll; background-color:rgb(247, 231, 203)">

  <div id="entire_div">


    <div style="width: 100%; height: 53px; background-color: rgb(249, 249, 249);">
      <div style="height: 53px; font-size: 18px; float: left; padding-left: 10px; line-height: 53px;">SRIM Calculator</div>
      <form class="d-flex float-right" action="/get_code" method="get" style="float: right; margin-top: 10px; padding-right: 10px;">
        <input class="form-control me-2" type="text" name="_input_code_or_name" placeholder="stock code" style="width: 100px; height: 35px; margin: 0; padding: 5px; font-size: 15px; text-align: center;">
        <button class="btn btn-outline-dark" type="submit" style="width: 55px; height: 35px; padding: 4px; font-size: 12px;">Search</button>
        <!-- btn-dark -->
      </form>
    </div>

    <!-- <div style="width: 100%; height: 53px; background-color: rgb(249, 249, 249);">
      <div style="height: 53px; font-size: 15px; float: left; padding-left: 10px; line-height: 53px;">SRIM Calculator</div>
      <form class="d-flex float-right" action="/get_code" method="get" style="float: right; margin-top: 12px; padding-right: 10px;">
        <input class="form-control me-2" type="text" name="_input_code" placeholder="stock code" style="width: 90px; height: 30px; margin: 0; padding: 5px; font-size: 12px; text-align: center;">
        <button class="btn btn-outline-primary" type="submit" style="width: 48px; height: 30px; padding: 4px; font-size: 12px;">Search</button>
      </form>
    </div> -->


    <!-- <table style="width: auto; height: 30px; margin: auto; margin-top: 15px; margin-bottom: 30px;">
      <tr>
        <td style="width: auto; font-size: 20px; font-weight: bold; text-align: left; padding-left: 5px;">SK하이닉스</td>
        <td style="width: auto; padding-left: 5px;"><div style="width: 1.5px; height: 20px; background-color: rgb(204, 204, 204);"></div></td>
        <td style="width: auto; font-size: 20px; font-weight: bold; text-align: left; padding-left: 5px; padding-right: 5px;">170,700<span style="font-size: 10px;">원</span></td>
        <td style="width: 50px; height: 25px;"><div style="width: 90%; height: 80%; margin: auto; text-align: center; color: crimson; font-size: 11px; font-weight: bold; line-height: 20px; border: 2px solid crimson; border-radius: 5px;">BUY</div></td>
      </tr>
    </table> -->

    <table style="width: auto; height: 30px; margin: auto; margin-top: 15px; margin-bottom: 30px;">
      <tr>
        <td style="width: auto; font-size: 20px; font-weight: bold; text-align: left;"><%= _stock_name %></td>
        <td style="width: auto; padding-left: 6px;"><div style="width: 2px; height: 20px; background-color: rgb(204, 204, 204);"></div></td>
        <td style="width: auto; font-size: 20px; font-weight: bold; text-align: left; padding-left: 6px; padding-right: 7px;"><%= _stock_price %><span style="font-size: 10px;">원</span></td>
        <td style="width: 50px; height: 25px;">
          <% if(_buy_or_sell=="empty"){ %>
            <div id="decision_empty">-</div>
          <% }else if(_buy_or_sell=="BUY"){ %>
            <div id="decision_buy">BUY</div>
          <% }else if(_buy_or_sell=="SELL 1"){ %>
            <div id="decision_sell">SELL 1</div>
          <% }else{ %>  
            <div id="decision_sell">SELL 2</div>
          <% } %>  
        </td>
      </tr>
    </table>

    <!-- <div style="width: 96%; height: 1px; margin-left: 2%; margin-top: 5px; background-color: rgb(182, 182, 182);"></div> -->


    <div id="div_capital_stock">
      <div id="div_capital">
        <table style="width: 100%;">
          <tr>
            <td colspan="2" style="height: 15px; padding: 0; background-color: rgb(255, 255, 255); font-size: 13px; font-weight: bold; color: rgb(0, 0, 0); text-align: left; line-height: 15px;">&bull; 자본 (₩)</td>
          </tr>
          <tr class="table_roe_year">
            <td class="table_roe_year" style="width: 45%;"></td>
            <td class="table_roe_year" style="width: 55%;">2021</td>
          </tr>
          <tr>
            <td class="table_capital_stock_header" style="width: 45%;">자본총계</td>
            <td class="table_capital_stock_value" style="width: 55%;"><%= _capital %></td>
          </tr>
        </table>
      </div>

      <div style="width: 8%; height: 20px; float: left;"></div>

      <div id="div_stock">
        <table style="width: 100%;">
          <tr>
            <td colspan="2" style="height: 15px; padding: 0; background-color: rgb(255, 255, 255); font-size: 13px; font-weight: bold; color: rgb(0, 0, 0); text-align: left; line-height: 15px;">&bull; 주식수</td>
          </tr>
          <tr class="table_roe_year">
            <td class="table_roe_year" style="width: 45%;"></td>
            <td class="table_roe_year" style="width: 55%;">2021</td>
          </tr>
          <tr>
            <td class="table_capital_stock_header" style="width: 45%">발행주식수</td>
            <td class="table_capital_stock_value" style="width: 55%;"><%= _totalStock %></td>
          </tr>
          <tr>
            <td class="table_capital_stock_header" style="width: 45%;">자사주수</td>
            <td class="table_capital_stock_value" style="width: 55%;"><%= _companyStock %></td>
          </tr>
          <tr>
            <td class="table_capital_stock_header" style="width: 45%;">유통주식수</td>
            <td class="table_capital_stock_value" style="width: 55%;"><%= _stocks %></td>
          </tr>
        </table>

      </div>
    </div>

    <table style="width: 96%; margin-left: 2%; font-size: 11px; ">
      <tr>
        <td colspan="6" style="height: 35px; padding: 0; background-color: rgb(255, 255, 255); font-size: 15px; font-weight: bold; color: rgb(0, 0, 0); text-align: left; line-height: 27px;">&bull; ROE (%)</td>
      </tr>
      <tr class="table_roe_year">
        <td class="table_roe_year">2020</td>
        <td class="table_roe_year">2021</td>
        <td class="table_roe_year">2022</td>
        <td class="table_roe_year"><span style="height: 15px; font-weight: 100; font-size: 13px; color: #00CC66">Ⓔ</span>2023</td>
        <td class="table_roe_year"><span style="height: 15px; font-weight: 100; font-size: 13px; color: #00CC66">Ⓔ</span>2024</td>
        <td class="table_roe_year"><span style="height: 15px; font-weight: 100; font-size: 13px; color: #00CC66">Ⓔ</span>2025</td>
      </tr>
      <tr>
        <td class="table_roe_pre"><%= _roe_p1 %></td>
        <td class="table_roe_pre"><%= _roe_p2 %></td>
        <td class="table_roe_pre"><%= _roe_p3 %></td>
        <td class="table_roe_fu"><%= _roe_f1 %></td>
        <td class="table_roe_fu"><%= _roe_f2 %></td>
        <td class="table_roe_fu"><%= _roe_f3 %></td>
      </tr>
    </table>


    <div style="width: 96%; height: 1px; margin-left: 2%; margin-top: 30px; background-color: rgb(182, 182, 182);"></div>


    <table style="width: 96%; margin-left: 2%; font-size: 11px; ">
      <tr>
        <td colspan="5" style="height: 50px; padding: 0; background-color: rgb(255, 255, 255); font-size: 15px; font-weight: bold; color: rgb(0, 0, 0); text-align: center; line-height: 35px;">&lt;RESULT&gt;</td>
      </tr>
      <tr class="table_roe_year">
        <td class="table_price_header" style="width: 14%;"></td>
        <td class="table_price_header" style="width: 23%;">성장반영X</td>
        <td class="table_price_header" style="width: 25%;">성장반영(10y)</td>
        <td class="table_price_header" style="width: 25%;">성장반영(5y)</td>
        <td class="table_price_header" style="width: 13%;"></td>

      </tr>
      <tr>
        <td class="table_price_value1" style="width: 14%; text-align: center; padding: 0; background-color: rgb(246, 246, 246);">ω=1</td>
        <td class="table_price_value1" style="width: 23%; font-weight: 100;"><%= _price_0y_10 %></td>
        <td class="table_price_value1" style="width: 25%; font-weight: 100;"><%= _price_10y_10 %></td>
        <td class="table_price_value1" style="width: 25%; color: blue; background-color: #fff47b;"><%= _price_5y_10 %></td>
        <td class="table_price_value1" style="width: 13%; text-align: center; padding: 0;">sell 2</td>

      </tr>
      <tr>
        <td class="table_price_value1" style="width: 14%; text-align: center; padding: 0; background-color: rgb(246, 246, 246);">ω=0.9</td>
        <td class="table_price_value1" style="width: 23%; font-weight: 100;"><%= _price_0y_9 %></td>
        <td class="table_price_value1" style="width: 25%; font-weight: 100;"><%= _price_10y_9 %></td>
        <td class="table_price_value1" style="width: 25%; color: #00a251; background-color: #fff47b;"><%= _price_5y_9 %></td>
        <td class="table_price_value1" style="width: 13%; text-align: center; padding: 0;">sell 1</td>

      </tr>
      <tr>
        <td class="table_price_value1" style="width: 14%; text-align: center; padding: 0; background-color: rgb(246, 246, 246);">ω=0.8</td>
        <td class="table_price_value1" style="width: 23%; font-weight: 100;"><%= _price_0y_8 %></td>
        <td class="table_price_value1" style="width: 25%; font-weight: 100;"><%= _price_10y_8 %></td>
        <td class="table_price_value1" style="width: 25%; color: crimson; background-color: #fff47b;"><%= _price_5y_8 %></td>
        <td class="table_price_value1" style="width: 13%; text-align: center; padding: 0;">buy</td>

      </tr>

    </table>
    

    <!-- <div style="width: 96%; height: 1px; margin-left: 2%; margin-top: 30px; background-color: rgb(182, 182, 182);"></div> -->


    <form action="/get_change" method="get">
      <table style="width: 94%; margin-left: 3%; margin-top: 20px;">
        <tr>
          <td class="form_table" style="width: 20%;">요구수익률</td>
          <td class="form_table" style="width: 20%;">ROE(2023)</td>
          <td class="form_table" style="width: 20%;">ROE(2024)</td>
          <td class="form_table" style="width: 20%;">ROE(2025)</td>
          <td class="form_table" style="width: 2%;"></td>
          <td rowspan="2" class="form_table" style="width: 18%;"><input type="submit" value="Submit" style="width: 50px; height: 30px; margin-top: 15px; line-height: 25px; text-align: center; color: white; background-color:rgb(137, 137, 137); border-radius: 20px; outline:none; font-weight: bold;"></td>
        </tr>
        <tr>
          <td class="form_table" style="width: 20%;"><input type="text" name="_change_input_rate" style="width: 80%; height: 22px; font-size: 20px;"></td>
          <td class="form_table" style="width: 20%;"><input type="text" name="_change_roe_f1" style="width: 80%; height: 22px; font-size: 20px;"></td>
          <td class="form_table" style="width: 20%;"><input type="text" name="_change_roe_f2" style="width: 80%; height: 22px; font-size: 20px;"></td>
          <td class="form_table" style="width: 20%;"><input type="text" name="_change_roe_f3" style="width: 80%; height: 22px; font-size: 20px;"></td>
          <td class="form_table" style="width: 2%;"></td>
          <td class="form_table" style="width: 18%;"></td>
        </tr>

      </table>  

    </form>


    <div style="width: 100%; height: 5px; margin-top: 20px; background-color: rgb(246, 246, 246);"></div>


    <table style="width: 96%; margin-left: 2%; margin-top: 5px; font-size: 11px; ">  
      <tr id="form_table_tr">
        <!-- <td class="table_stock_graph_time" onclick="candle_day()" >일봉</td> -->
        <td class="table_stock_graph_time table_stock_graph_time2" id="candle_day">일봉</td>
        <td class="table_stock_graph_time" id="candle_week">주봉</td>
        <td class="table_stock_graph_time" id="candle_month">월봉</td>
        <td class="table_stock_graph_time" id="line_day">1일</td>
        <td class="table_stock_graph_time" id="line_month3">3개월</td>
        <td class="table_stock_graph_time" id="line_year1">1년</td>
        <td class="table_stock_graph_time" id="line_year3">3년</td>
        <td class="table_stock_graph_time" id="line_year10">10년</td>
      </tr>
    </table>

    <!-- 클릭시 진하게 표시 -->
    <script>
      const nonClick = document.querySelectorAll(".table_stock_graph_time");

      function handleClick(event) {
        // div에서 모든 "click" 클래스 제거
        nonClick.forEach((e) => {
          e.classList.remove("table_stock_graph_time2");
        });
        // 클릭한 div만 "click"클래스 추가
        event.target.classList.add("table_stock_graph_time2");
      }

      nonClick.forEach((e) => {
        e.addEventListener("click", handleClick);
      });

    </script>
    <!-- ---------------------- -->



    <% if(_first_chart=="0"){ %>
        <!-- 코드 입력 전 아주처음 화면에서 나오는 회색 화면 -->
        <img id="img_stock_graph" src="stockchart_noImg.png" style="width: 96%; margin-left: 2%;"/>
    <% }else{ %>
        <!-- 코드를 입력하고 나서는 처음 화면에 일봉 차트 표시 -->
        <img id="img_stock_graph" src="https://ssl.pstatic.net/imgfinance/chart/item/candle/day/<%= _input_code %>.png?sidcode=1694091729352" style="width: 96%; margin-left: 2%;"/>
    <% } %>



    <div style="width: 100%; height: 5px; margin-top: 20px; background-color: rgb(246, 246, 246);"></div>



  </div>


    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>


</body>
</html>



